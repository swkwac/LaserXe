---
import Layout from "../layouts/Layout.astro";
import LoginForm from "../components/auth/LoginForm";

const rawRedirect = Astro.url.searchParams.get("redirect") ?? "/images";
const redirectUrl = rawRedirect.startsWith("/") && !rawRedirect.startsWith("//") ? rawRedirect : "/images";
const messageParam = Astro.url.searchParams.get("message") ?? null;
---

<Layout title="Logowanie â€“ LaserXe" showHeader={false}>
  <main class="flex min-h-full flex-col items-center justify-center px-4 py-12" role="main">
    <div class="laserme-card w-full max-w-sm space-y-6">
      <h1 class="text-center text-2xl font-semibold tracking-tight text-foreground">Logowanie</h1>
      <LoginForm client:load redirectUrl={redirectUrl} message={messageParam} />
    </div>
  </main>
</Layout>
